# 电商1班 231548141柳国兴 后端考核文档 level-3

github:https://github.com/lurkerhhh/zhuawa_level_3

后端服务启动类在：test/src/main/java/org/eample/test/TestApplication.java

前端登录页面：放在test/main/resources/static/login.html

数据库文件：test/test.sql

## 1.所用技术：

Springboot3/Mybaits/Maven(阿里云镜像仓库)/Mysql8.0/前端只用了基本的html/css/js

## 2.mysql关系型数据库设计：

user用户表/类(后面才看到学生跟教师是分开的，两个不同的表和类，我是直接全用user一个类表示，用一个字段标识身份，但都快做完了不太好改，如果要重新设计数据库表和实体类，我可能会用user类表示每个用户的基本信息，如账号密码用户id等，再创建student类和teacher类继承user类，这两个类中有学生与老师各自的额外信息，如老师有所属学院，用一个外键college_id与学院类绑定关系等)

user用户类/表----major专业表/类----college学院表/类 （user学生表有专业id通过外键与专业表绑定———专业major属于学院college，在major中有个外键c_id学院id关联，学院表为父表，专业表为子表）

## 3.关于未完成的拓展功能的思考：

1.可以用springsecurity框架，使用户不能直接通过输入url进入管理员页面，xian

2.黑白名单ip可以用HttpServletRequest获取ip判断，数据库新建张表来存储黑白名单ip

3.图片/数字验证码之类的是前端的工作了，很多地方都有写好的插件可以直接用。

4.三天/七天免登录可以使用浏览器的cookie或者token存储在redis或者mysql中（随机生成/设置过期时间，前端每次请求都带上，后端根据token获取用户信息进行权限判断是否需要登录等，若token未过期前端就直接根据用户权限跳转到相应目录，但工作量会很大）

5.关于各种批量操作（我都没实现），主要是前端要写挺多东西的，但大致思路就是前端把id之类的数据一次性发送到后端，后端再批量处理就可以了。

6.文件上传功能，做个比较好实现，但我为了做快点，人员头像图片我是直接转成base64以字符串的方式存储在数据库当中。一次性选择多个文件后端只需要用一个MultipartFile的数组接收就可以了，然后再进行文件存储的常规操作（如把把文件在本地/服务器上保存路径存储到数据库当中等）

7.mysql使用模糊搜索like关键字就可以实现（互金院可以查询出来、互联网金融与信息工程学院也可以查询院系号）功能

8.异常账号的定时检测问题，我觉得可以用定时任务tack功能，在记录token的表中加上ip字段，定时监测，若符合异常规则就改账号状态为异常。但我没理解非法课程创建等是什么意思，是根据ip判断吗？

9.大部分功能通过联表操作就可以完成，但重点是前期要仔细看需求，合理设计关系表，而不是跟我这次一样直接干，写到一半发现有新字段中途去增加表之间的关联关系。

10.关于缓存池的使用，这个也可以用redis来代替，可以用缓存池来缓存一些查询频率高的数据，减少数据库的压力。

11.关于线程安全问题，目前还没有太多想过这个。————————2024.5.14 晚

## 结语

5.13开始做，由于时间较赶（两天时间），前端页面做的比较简陋，后端直接用了框架，从搭建框架数据库到前端js，极限了，功能比自己想象的要多，用上springboot还是没赶完。

后面还有一些功能没做完，但感觉流程都差不多，只是需要时间，或者引入更多其他技术或框架进行项目的优化，权限功能没想好要怎么做， 是直接用数据库之类的判断（感觉前后端都会有点繁琐）还是引入一些安全验证框架如SpringSecurity之类的，加入权限功能后端和前端要多做的事情加起来还挺多的，各种判断，多传一些参数。

